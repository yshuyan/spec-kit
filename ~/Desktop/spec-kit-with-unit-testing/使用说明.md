# Spec-Kit 测试包使用说明（含 Unit Testing）

> 这是一个包含完整 Unit Testing 功能的 Spec-Kit 测试包

## 📦 包含内容

### 1. 主要开发工作流命令
- `/specify` - 创建功能规范
- `/plan` - 创建实施计划
- `/tasks` - 生成任务列表
- `/implement` - 执行实施

### 2. Unit Testing 工作流命令 ⭐ 新增
- `/specify-unit` - 创建测试规范
- `/plan-unit` - 创建测试计划
- `/tasks-unit` - 生成测试任务
- `/implement-unit` - 执行测试实施

### 3. 辅助命令
- `/analyze` - 分析一致性
- `/clarify` - 消除歧义
- `/constitution` - 建立项目原则

## 🚀 快速开始

### 方法 1：复制到新项目

```bash
# 创建新项目
mkdir my-new-project
cd my-new-project

# 初始化 git（可选）
git init

# 复制所有 spec-kit 文件
cp -r ~/Desktop/spec-kit-with-unit-testing/.claude .
cp -r ~/Desktop/spec-kit-with-unit-testing/.specify .

# 提交初始状态
git add .
git commit -m "Initialize with Spec-Kit (including unit testing)"
```

### 方法 2：直接在测试包目录工作

```bash
cd ~/Desktop/spec-kit-with-unit-testing

# 初始化 git
git init
git add .
git commit -m "Initial commit with Spec-Kit"

# 开始工作
```

### 方法 3：将此包作为模板

```bash
# 重命名为你的项目名
mv ~/Desktop/spec-kit-with-unit-testing ~/Desktop/my-project-name

cd ~/Desktop/my-project-name

# 初始化为你的项目
git init
git add .
git commit -m "Initial commit from Spec-Kit template"

# 开始开发
```

## 🧪 测试 Unit Testing 功能

### 1. 创建第一个测试规范

```bash
cd ~/Desktop/spec-kit-with-unit-testing
git init  # 如果还没初始化

# 使用 Claude Code 运行
claude /specify-unit test user authentication with validation
```

这会：
- 创建测试分支（如 `001-unit-test-user-authentication`）
- 生成 `tests/001-unit-test-user-authentication/test-spec.md`

### 2. 创建测试计划

```bash
claude /plan-unit
```

生成：
- `test-plan.md` - 测试实施计划
- `test-strategy.md` - 测试策略
- `test-data.md` - 测试数据需求
- `mocks/` - Mock 对象规范

### 3. 生成测试任务

```bash
claude /tasks-unit
```

生成 `test-tasks.md` 包含可执行的测试任务列表。

### 4. 实施测试

```bash
claude /implement-unit
```

执行所有测试任务并生成测试代码。

## 📁 目录结构

```
spec-kit-with-unit-testing/
├── .claude/
│   └── commands/
│       ├── specify-unit.md          ⭐ Unit testing
│       ├── plan-unit.md             ⭐ Unit testing
│       ├── tasks-unit.md            ⭐ Unit testing
│       ├── implement-unit.md        ⭐ Unit testing
│       ├── specify.md
│       ├── plan.md
│       ├── tasks.md
│       ├── implement.md
│       ├── analyze.md
│       ├── clarify.md
│       └── constitution.md
│
├── .specify/
│   ├── memory/
│   │   └── constitution.md
│   ├── scripts/
│   │   └── bash/
│   │       ├── create-unit-test.sh      ⭐ Unit testing
│   │       ├── setup-unit-plan.sh       ⭐ Unit testing
│   │       ├── check-unit-prerequisites.sh ⭐ Unit testing
│   │       ├── create-new-feature.sh
│   │       ├── setup-plan.sh
│   │       └── ... (其他脚本)
│   └── templates/
│       ├── unit-test-template.md        ⭐ Unit testing
│       ├── unit-test-plan-template.md   ⭐ Unit testing
│       ├── unit-tasks-template.md       ⭐ Unit testing
│       ├── spec-template.md
│       ├── plan-template.md
│       └── ... (其他模板)
│
└── 使用说明.md (本文件)
```

## ✅ 验证安装

### 检查命令文件

```bash
ls -la .claude/commands/ | grep -E "(specify|plan|tasks|implement)"
```

应该看到 8 个文件（4个主工作流 + 4个 unit testing）。

### 检查模板文件

```bash
ls -la .specify/templates/ | grep unit
```

应该看到 3 个 unit testing 模板文件。

### 检查脚本文件

```bash
ls -la .specify/scripts/bash/ | grep unit
```

应该看到 3 个 unit testing 脚本文件。

## 🎯 完整开发流程示例

### 场景：开发一个用户认证功能及其测试

#### 第一步：开发功能

```bash
# 1. 创建功能规范
claude /specify user authentication with JWT tokens

# 2. 创建实施计划
claude /plan

# 3. 生成任务
claude /tasks

# 4. 实施功能
claude /implement
```

#### 第二步：创建测试

```bash
# 1. 创建测试规范
claude /specify-unit test user authentication with valid and invalid tokens

# 2. 创建测试计划
claude /plan-unit

# 3. 生成测试任务
claude /tasks-unit

# 4. 实施测试
claude /implement-unit
```

## 🔧 与 specify CLI 集成

如果你使用 `specify` CLI 工具，可以配合使用：

```bash
# CLI 命令（不需要斜杠命令文件）
specify unit init "test user authentication"
specify unit plan
specify unit check
specify unit status

# 斜杠命令（使用 .claude/commands/ 中的文件）
claude /specify-unit test user authentication
claude /plan-unit
claude /tasks-unit
claude /implement-unit
```

两种方式都可以，看你的偏好！

## 📊 支持的测试框架

- **Python**: pytest, unittest, nose2
- **JavaScript/TypeScript**: Jest, Mocha, Jasmine, Vitest
- **Java**: JUnit, TestNG, Spock
- **Swift**: XCTest
- **C#**: NUnit, xUnit, MSTest
- **Go**: testing package, Ginkgo
- **Rust**: cargo test

## 🎨 关键特性

### Unit Testing 特有功能

✅ 完整的测试规划流程
✅ 自动生成 Mock 对象规范
✅ 测试数据管理
✅ 覆盖率要求追踪
✅ 并行测试任务识别
✅ CI/CD 集成支持
✅ Flaky 测试检测

### 主工作流特性

✅ 规范驱动开发
✅ 结构化的实施计划
✅ 任务依赖管理
✅ 并行执行优化
✅ 一致性分析
✅ 歧义消除

## 💡 最佳实践

1. **先写规范，后写代码** - 使用 `/specify` 明确需求
2. **测试与开发并行** - 功能开发完成后立即创建测试
3. **利用模板** - 所有模板文件都经过精心设计
4. **遵循工作流** - 按照 specify → plan → tasks → implement 的顺序
5. **提交分支** - 每个功能和测试都在独立分支开发

## 🐛 故障排除

### 命令不可用

```bash
# 检查文件是否存在
ls .claude/commands/

# 如果缺少文件，从测试包复制
cp ~/Desktop/spec-kit-with-unit-testing/.claude/commands/* .claude/commands/
```

### 脚本权限问题

```bash
# 确保脚本可执行
chmod +x .specify/scripts/bash/*.sh
```

### Git 分支问题

```bash
# 确保项目已初始化 git
git init
git add .
git commit -m "Initial commit"
```

## 📚 更多资源

- **完整文档**: 查看 spec-kit 仓库的 `UNIT-TESTING.md`
- **模板说明**: 查看 `.specify/templates/` 中的各个模板文件
- **脚本帮助**: 运行脚本时加 `--help` 参数

## 🎉 开始使用

现在你有一个完整的、包含 Unit Testing 功能的 Spec-Kit 模板了！

选择一个方法开始：
1. 复制到新项目
2. 直接在此目录工作
3. 重命名为你的项目

然后运行：
```bash
claude /specify your-first-feature
```

开始你的 Spec-Driven Development 之旅！

---

**版本**: v1.0.1 (测试包)  
**生成时间**: 2025-10-20  
**包含**: 完整主工作流 + Unit Testing 工作流

